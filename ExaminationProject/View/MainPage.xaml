<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodel="clr-namespace:ExaminationProject.ViewModel"
             xmlns:model="clr-namespace:ExaminationProject.Model"
             x:DataType="viewmodel:MainViewModel"
             x:Class="ExaminationProject.MainPage"
             Title="Shirtify - Homepage"
             >

    <ScrollView>
        <VerticalStackLayout
            Padding="30, 0"
            Spacing="25">

            <VerticalStackLayout>
                <Button Text="📸 Ta Foto" Command="{Binding TakePhotoCommand}"
                        Background="#b4d2de"
                        FontFamily="Chewy"
                        FontSize="20"
                        HorizontalOptions="Center"
                        VerticalOptions="CenterAndExpand"/>

                <Image Source="{Binding SavedImageSource}"/>
            </VerticalStackLayout>


            <Button Text="🧺 - Tvättråd och skötsel"
                    Command="{Binding GoToPage1Command}"
                    Background="#b4d2de"
                    FontFamily=""
                    FontSize="20"/>

            <Button Text="To Detail Page"
        Command="{Binding GoToDetailPageCommand}"
        Background="#b4d2de"
        
        FontSize="20"/>

            <Button
                Command="{Binding GoToCrudPageCommand}" 
                Text="Gå till CRUD"
                Background="#91b597"
                FontSize="18" FontFamily="Chewy"/>

            <Entry
                Placeholder="Ge namnet på Tröja"
                Text="{Binding ShirtName}"
                FontSize="20">
            </Entry>

            <Button
                Command="{Binding ClickButtonCommand}" 
                Text="Lägg till.."
                Background="#91b597"
                FontSize="18" FontFamily="Chewy"/>

            <!-- Corrected CollectionView for displaying shirts -->
            <CollectionView ItemsSource="{Binding Shirts}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="model:Shirt">
                        <VerticalStackLayout Padding="10" Spacing="10">
                            <Label Text="{Binding Id}" FontSize="20" />
                            <Label Text="{Binding Brand}" FontSize="20" />
                            <Label Text="{Binding Color_Id}" FontSize="16" TextColor="Gray"/>
                            
                            <Button Text="Delete" 
                                    Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodel:MainViewModel}},Path=DeleteShirtCommand}" 
                                    CommandParameter="{Binding Id}" 
                                    BackgroundColor="Red" 
                                    TextColor="White"/>
                        </VerticalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>


        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
